<html><head><base href="/" /> 
<title>Cristo es la Luz Radio</title>
<link rel="manifest" href="manifest.json">
<head>
  <link rel="icon" href="icon16.png" sizes="16x16" type="image/png">
  <link rel="icon" href="icon32.png" sizes="32x32" type="image/png">
  <link rel="icon" href="icon48.png" sizes="48x48" type="image/png">
  <link rel="apple-touch-icon" href="icon180.png">
</head>






<script>
  // Verifica si el navegador soporta Service Workers
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', () => {
      navigator.serviceWorker.register('/service-worker.js')
        .then((registration) => {
          console.log('Service Worker registrado con Ã©xito:', registration);
        })
        .catch((error) => {
          console.log('Error al registrar el Service Worker:', error);
        });
    });
  }
  </script>
  
<style>
:root {
  --primary-color: #e0e5ec;
  --shadow-color: #9baacf;
  --light-shadow: #ffffff;
  --dark-mode-bg: #1a1a1a;
  --dark-mode-shadow: #000000;
  --accent-color: #7B68EE;
}

body {
  margin: 0;
  min-height: 100vh;
  background: linear-gradient(rgba(0,0,0,0.3), rgba(0,0,0,0.5)), url('fondo.png');
  background-size: 70% auto; 
  background-position: center; 
  background-repeat: no-repeat; 
  display: flex;
  justify-content: center;
  align-items: center;
  font-family: 'Segoe UI', sans-serif;
  transition: all 0.3s ease;
  backdrop-filter: blur(10px);
}

body.dark-mode {
  background: var(--dark-mode-bg);
  background: linear-gradient(rgba(0,0,0,0.3), rgba(0,0,0,0.5)), url('fondodark.png');
  background-size: 70% auto;
  background-position: center;
  background-repeat: no-repeat;
}

.player-container {
  width: 100%; /* Changed from 70% to 100% */
  max-width: none; /* Remove max-width limitation */
  padding: 30px;
  border-radius: 20px;
  background: var(--primary-color);
  box-shadow: 
    -10px -10px 20px var(--light-shadow),
    10px 10px 20px var(--shadow-color),
    inset -5px -5px 10px var(--light-shadow),
    inset 5px 5px 10px var(--shadow-color);
  position: relative;
}

.title {
  text-align: center;
  font-size: 2.5em;
  margin-bottom: 30px;
  background: linear-gradient(145deg, #b8b8b8, #f0f0f0);
  -webkit-background-clip: text; /* VersiÃ³n con prefijo para compatibilidad con navegadores antiguos */
  background-clip: text; /* Propiedad estÃ¡ndar */
  -webkit-text-fill-color: transparent;
  text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
  transform: perspective(500px) rotateX(20deg);
}
.controls {
  display: flex;
  justify-content: center;
  gap: 20px;
  margin: 20px 0;
}

.btn {
  width: 60px;
  height: 60px;
  border-radius: 50%;
  border: none;
  background: var(--primary-color);
  box-shadow: 
    -5px -5px 10px var(--light-shadow),
    5px 5px 10px var(--shadow-color);
  cursor: pointer;
  transition: all 0.3s ease;
  display: flex;
  align-items: center;
  justify-content: center;
}

.btn:hover {
  transform: translateY(-2px);
  box-shadow: 
    -7px -7px 14px var(--light-shadow),
    7px 7px 14px var(--shadow-color);
  filter: brightness(1.1);
}

.btn:active {
  box-shadow: 
    inset -5px -5px 10px var(--light-shadow),
    inset 5px 5px 10px var(--shadow-color);
}

.btn.muted {
  background: var(--accent-color);
  color: white;
}

.volume-control {
  position: static; 
  width: 150px;
  height: 40px;
  display: inline-flex; 
  flex-direction: row;
  align-items: center;
  padding: 10px;
  border-radius: 20px;
  background: var(--primary-color);
  box-shadow: 
    inset -2px -2px 5px var(--light-shadow),
    inset 2px 2px 5px var(--shadow-color);
  margin-right: 10px; 
}

.volume-control {
  position: static; 
  width: 150px;
  height: 40px;
  display: inline-flex; 
  flex-direction: row;
  align-items: center;
  padding: 10px;
  border-radius: 20px;
  background: var(--primary-color);
  box-shadow: 
    inset -2px -2px 5px var(--light-shadow),
    inset 2px 2px 5px var(--shadow-color);
  margin-right: 10px; 
}

/* Para asegurar la compatibilidad en todos los navegadores */
* {
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
}

#volume {
  writing-mode: initial; 
  -webkit-appearance: none; 
  -moz-appearance: none;
  appearance: none;
  width: 100px; 
  height: 8px; 
}

.visualizer {
  width: 80%;
  max-width: 400px;
  aspect-ratio: 1;
  height: auto;
  margin: 20px auto;
  position: relative;
  background: rgba(0, 0, 0, 0.05);
  border-radius: 50%;
  box-shadow: 
    -5px -5px 10px var(--light-shadow),
    5px 5px 10px var(--shadow-color),
    inset -2px -2px 5px var(--light-shadow),
    inset 2px 2px 5px var(--shadow-color);
  overflow: hidden;
}

#analyzer {
  width: 100%;
  height: 100%;
  filter: drop-shadow(0 0 10px var(--accent-color));
}

.social-buttons {
  display: flex;
  justify-content: center;
  gap: 15px;
  margin-top: 20px;
}

.social-btn {
  width: 40px;
  height: 40px;
  transition: all 0.3s ease;
}

.social-btn:hover {
  transform: translateY(-2px) scale(1.1);
  filter: brightness(1.2);
}

/* Dark mode */
body.dark-mode {
  background: var(--dark-mode-bg);
}

body.dark-mode .player-container {
  background: var(--dark-mode-bg);
  box-shadow: 
    -10px -10px 20px #2d2d2d,
    10px 10px 20px var(--dark-mode-shadow);
}

.install-btn {
  margin: 20px auto; 
  padding: 10px 20px;
  border-radius: 10px;
  background: var(--accent-color);
  color: white;
  border: none;
  cursor: pointer;
  box-shadow: 
    -3px -3px 7px var(--light-shadow),
    3px 3px 7px var(--shadow-color);
  transition: all 0.3s ease;
  display: block; 
}

.bottom-controls {
  display: flex;
  align-items: center;
  justify-content: center;
  margin-top: 20px;
  gap: 10px;
}
</style>
</head>
<body>

<div class="player-container">
  <h1 class="title">ONLINE </h1>

  <div class="visualizer">
    <canvas id="analyzer"></canvas>
  </div>

  <div class="controls">
    <button class="btn" id="playPause">
      <svg width="24" height="24" viewBox="0 0 24 24">
        <path d="M8 5v14l11-7z" fill="currentColor"/>
      </svg>
    </button>
    <button class="btn" id="mute">
      <svg width="24" height="24" viewBox="0 0 24 24">
        <path d="M3 9v6h4l5 5V4L7 9H3z" fill="currentColor"/>
      </svg>
    </button>
  </div>

  <div class="bottom-controls">
    <div class="volume-control">
      <input type="range" id="volume" min="0" max="100" value="100">
    </div>
    <button class="btn" id="darkMode">ðŸŒ™</button>
  </div>

  <div class="social-buttons">
    <a href="https://wa.me/your-number" class="social-btn btn">
      <svg width="24" height="24" viewBox="0 0 24 24">
        <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347z" fill="currentColor"/>
        <path d="M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0zm5.562 14.784c-.242.694-1.429 1.328-2 1.413-.511.077-1.159.109-1.871-.118-.432-.136-.985-.319-1.694-.625-2.981-1.287-4.928-4.289-5.077-4.487-.148-.199-1.213-1.612-1.213-3.074 0-1.463.768-2.182 1.04-2.479.272-.298.594-.372.792-.372.199 0 .397.002.57.01.182.01.427-.069.669.51.247.595.841 2.058.916 2.207.075.149.124.322.025.52-.1.199-.149.323-.298.497-.148.173-.312.387-.446.52-.148.148-.303.309-.13.606.173.298.77 1.271 1.653 2.059 1.135 1.012 2.093 1.325 2.39 1.475.297.148.471.124.644-.075.173-.198.743-.867.94-1.164.199-.298.397-.249.67-.15.272.1 1.733.818 2.03.967.298.149.496.223.571.347.075.124.075.719-.173 1.413z" fill="currentColor"/>
      </svg>
    </a>
    <a href="https://facebook.com/your-page" class="social-btn btn">
      <svg width="24" height="24" viewBox="0 0 24 24">
        <path d="M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0zm3.126 7.885h-1.252c-.465 0-.988.334-.988.921v1.417h2.24l-.332 2.276h-1.908V19h-2.357v-6.501H8.777v-2.276h1.752V8.484c0-1.439.957-2.784 2.784-2.784h1.813v2.185z" fill="currentColor"/>
      </svg>
    </a>
    <a href="https://instagram.com/your-profile" class="social-btn btn">
      <svg width="24" height="24" viewBox="0 0 24 24">
        <path d="M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0zm6.066 9.645c.183 4.04-2.83 8.544-8.164 8.544A8.127 8.127 0 0 1 5.5 16.898a5.778 5.778 0 0 0 4.252-1.189 2.879 2.879 0 0 1-2.684-1.995 2.88 2.88 0 0 0 1.298-.049c-1.381-.278-2.335-1.522-2.304-2.853.388.215.83.344 1.301.359a2.877 2.877 0 0 1-.889-3.835 8.153 8.153 0 0 0 5.92 3.001 2.876 2.876 0 0 1 4.895-2.62 5.73 5.73 0 0 0 1.824-.697 2.884 2.884 0 0 1-1.263 1.589 5.73 5.73 0 0 0 1.649-.453 5.765 5.765 0 0 1-1.433 1.489z" fill="currentColor"/>
      </svg>
    </a>
    <a href="https://youtube.com/your-channel" class="social-btn btn">
      <svg width="24" height="24" viewBox="0 0 24 24">
        <path d="M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0zm5.495 12.553l-7.314 4.018c-.119.065-.241.097-.362.097-.137 0-.272-.037-.39-.109-.259-.156-.414-.437-.414-.741v-8.036c0-.304.155-.585.414-.741.259-.156.577-.157.837-.004l7.314 4.018c.265.146.428.423.428.724s-.163.578-.428.724z" fill="currentColor"/>
      </svg>
    </a>
  </div>

  <button class="install-btn" id="installApp">Instala App</button>
</div>

<script>
let audioContext;
let audioElement;
let analyzer;
let source;
let isPlaying = false;
let deferredPrompt;
let isMuted = false;

// Initialize audio context
function initAudio() {
  audioContext = new (window.AudioContext || window.webkitAudioContext)();
  audioElement = new Audio();
  audioElement.crossOrigin = "anonymous";
  audioElement.src = "http://stream.zeno.fm/mfer4shs398uv";
  
  source = audioContext.createMediaElementSource(audioElement);
  analyzer = audioContext.createAnalyser();
  
  source.connect(analyzer);
  analyzer.connect(audioContext.destination);
  
  analyzer.fftSize = 256;
  drawVisualizer();
}

// Visualizer
function drawVisualizer() {
  const canvas = document.getElementById('analyzer');
  const ctx = canvas.getContext('2d');

  // Make canvas size responsive
  const visualizer = document.querySelector('.visualizer');
  canvas.width = visualizer.offsetWidth;
  canvas.height = visualizer.offsetWidth;
  
  const bufferLength = analyzer.frequencyBinCount;
  const dataArray = new Uint8Array(bufferLength);
  const centerX = canvas.width / 2;
  const centerY = canvas.height / 2;

  function draw() {
    requestAnimationFrame(draw);
    
    // Clear previous frame
    ctx.fillStyle = 'rgba(0, 0, 0, 0.1)';
    ctx.fillRect(0, 0, canvas.width, canvas.height);

    const gradient = ctx.createLinearGradient(0, 0, canvas.width, canvas.height);
    gradient.addColorStop(0, '#7B68EE');
    gradient.addColorStop(0.5, '#BA55D3');
    gradient.addColorStop(1, '#FF69B4');
    
    ctx.strokeStyle = gradient;
    ctx.lineWidth = 3;
    ctx.beginPath();

    // Only draw frequency data if playing
    if (isPlaying) {
      analyzer.getByteFrequencyData(dataArray);
      
      for (let i = 0; i < bufferLength; i++) {
        const value = dataArray[i];
        const percent = value / 255;
        const radius = percent * 100 + 50;
        const angle = (i * 2 * Math.PI) / bufferLength;
        
        const x = centerX + Math.cos(angle) * radius;
        const y = centerY + Math.sin(angle) * radius;
        
        if (i === 0) {
          ctx.moveTo(x, y);
        } else {
          ctx.lineTo(x, y);
        }
      }
    } else {
      // Draw default circle when paused
      ctx.arc(centerX, centerY, 50, 0, 2 * Math.PI);
    }

    ctx.closePath();
    ctx.stroke();

    // Inner circle
    ctx.beginPath();
    ctx.arc(centerX, centerY, 30, 0, 2 * Math.PI);
    ctx.fillStyle = gradient;
    ctx.fill();

    // Pulsating outer ring (only when playing)
    if (isPlaying) {
      const time = Date.now() / 1000;
      const pulseRadius = 120 + Math.sin(time * 2) * 10;
      ctx.beginPath();
      ctx.arc(centerX, centerY, pulseRadius, 0, 2 * Math.PI);
      ctx.strokeStyle = 'rgba(123, 104, 238, 0.2)';
      ctx.lineWidth = 2;
      ctx.stroke();
    }
  }
  
  draw();
}

// Update the play/pause button visuals
function updatePlayPauseButton() {
  const playPauseBtn = document.getElementById('playPause');
  playPauseBtn.innerHTML = isPlaying ? 
    '<svg width="24" height="24" viewBox="0 0 24 24"><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z" fill="currentColor"/></svg>' : 
    '<svg width="24" height="24" viewBox="0 0 24 24"><path d="M8 5v14l11-7z" fill="currentColor"/></svg>';
}

// Event Listeners
document.getElementById('playPause').addEventListener('click', () => {
  if (!audioContext) initAudio();
  
  if (isPlaying) {
    audioElement.pause();
    isPlaying = false;
  } else {
    audioElement.play();
    isPlaying = true;
  }
  updatePlayPauseButton();
});

document.getElementById('volume').addEventListener('input', (e) => {
  if (audioElement) {
    audioElement.volume = e.target.value / 100;
  }
});

document.getElementById('mute').addEventListener('click', () => {
  if (audioElement) {
    audioElement.muted = !audioElement.muted;
    isMuted = audioElement.muted;
    document.getElementById('mute').classList.toggle('muted', isMuted);
  }
});

document.getElementById('darkMode').addEventListener('click', () => {
  document.body.classList.toggle('dark-mode');
});

// PWA Install
if ('serviceWorker' in navigator) {
  window.addEventListener('load', () => {
    navigator.serviceWorker.register('/service-worker.js')
      .then(registration => {
        console.log('ServiceWorker registered');
      })
      .catch(err => {
        console.log('ServiceWorker registration failed: ', err);
      });
  });
}

window.addEventListener('beforeinstallprompt', (e) => {
  e.preventDefault();
  deferredPrompt = e;
});

document.getElementById('installApp').addEventListener('click', async () => {
  if (deferredPrompt) {
    deferredPrompt.prompt();
    const { outcome } = await deferredPrompt.userChoice;
    deferredPrompt = null;
  }
});
</script>
</body></html>